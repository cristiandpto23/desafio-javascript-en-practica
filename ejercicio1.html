<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <title>Ejercicio 1</title>
        <link rel="stylesheet" href="./assets/css/style.css" />
    </head>

    <body>
        <header class="header">
            <a class="header__a" href="./index.html"><h3>⬅ Volver al main</h3></a>
        </header>
        <div>
            <div style="width: 40%; margin: 0 auto">
                <h2>Escríbenos !!!</h2>
                <div class="resultado" style="color: green; font-style: italic; margin-top: 10px"></div>
                <form id="formulario">
                    <div>
                        <div style="display: flex; flex-direction: column; gap: 8px">
                            <label> Nombre completo </label>
                            <input id="nombre" type="text" />
                            <p class="errorNombre" style="color: red; font-style: italic"></p>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 10px">
                            <label> Asunto </label>
                            <input id="asunto" type="text" />
                            <p class="errorAsunto" style="color: red; font-style: italic"></p>
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 10px">
                        <label> Mensaje </label>
                        <textarea id="mensaje"></textarea>
                        <p class="errorMensaje" style="color: red; font-style: italic"></p>
                    </div>
                    <div style="margin: 10px; text-align: center">
                        <button style="border-radius: 8px; padding: 8px" id="botton" type="submit">
                            Envíar mensaje
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <script>
            let form = document.getElementById("formulario");
            form.addEventListener("submit", function (event) {
                event.preventDefault();
                let textNombre = document.querySelector("#nombre").value;
                let textAsunto = document.querySelector("#asunto").value;
                let textMensaje = document.querySelector("#mensaje").value;
                let resultado = validar(textNombre, textAsunto, textMensaje);
                if (resultado == true) {
                    document.querySelector(".resultado").innerHTML = "Mensaje enviado correctamente.";
                }
            });

            function validar(nombre, asunto, mensaje) {
                let pasamosLaValidacion = true;
                limpiarErrores();
                let validacionNombre = /^[a-zA-ZÀ-ÿ\s]{1,100}$/gim;
                let validacionAsunto = /^[a-zA-ZÀ-ÿ\s]{1,100}$/gim;
                let validacionMensaje = /[a-zA-ZÀ-ÿ\s]{1,100}$/gim;

                if (validacionNombre.test(nombre) == false) {
                    document.querySelector(".errorNombre").innerHTML = "El nombre es requerido.";
                    pasamosLaValidacion = false;
                }

                if (validacionAsunto.test(asunto) == false) {
                    document.querySelector(".errorAsunto").innerHTML = "El mensaje es requerido.";
                    pasamosLaValidacion = false;
                }

                if (validacionMensaje.test(mensaje) == false) {
                    document.querySelector(".errorMensaje").innerHTML = "El mensaje es requerido.";
                    pasamosLaValidacion = false;
                }
                return pasamosLaValidacion;
            }

            function limpiarErrores() {
                document.querySelector(".resultado").innerHTML = "";
                document.querySelector(".errorNombre").innerHTML = "";
                document.querySelector(".errorAsunto").innerHTML = "";
                document.querySelector(".errorMensaje").innerHTML = "";
            }
        </script>
    </body>
</html>
